{"ast":null,"code":"import _regeneratorRuntime from\"/Users/leesebastian/Desktop/whitetails/Farnhok/skoolsCapstone/frontend/skools/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/leesebastian/Desktop/whitetails/Farnhok/skoolsCapstone/frontend/skools/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/leesebastian/Desktop/whitetails/Farnhok/skoolsCapstone/frontend/skools/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/leesebastian/Desktop/whitetails/Farnhok/skoolsCapstone/frontend/skools/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/leesebastian/Desktop/whitetails/Farnhok/skoolsCapstone/frontend/skools/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/leesebastian/Desktop/whitetails/Farnhok/skoolsCapstone/frontend/skools/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/leesebastian/Desktop/whitetails/Farnhok/skoolsCapstone/frontend/skools/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import axios from'axios';import{Container,Row,Card,CardHeader,CardBody,CardTitle,CardText,Col,Form,FormGroup,CardFooter,Button,Label,Input,ButtonDropdown,DropdownToggle,DropdownMenu,DropdownItem,Modal,ModalHeader,ModalBody,ModalFooter}from'reactstrap';import'../../assets/css/cms/socialCard.css';import{connect}from\"react-redux\";import{async}from'@firebase/util';import{storage}from'../../firebase';// import {deleteThunk} from \"../../redux/cmsSocial/\"\nexport var SocialCardPost=/*#__PURE__*/function(_React$Component){_inherits(SocialCardPost,_React$Component);var _super=_createSuper(SocialCardPost);function SocialCardPost(props){var _this;_classCallCheck(this,SocialCardPost);_this=_super.call(this,props);_this.handlePost=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(postValue){var options,posts;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:// console.log(postValue)\noptions={method:'POST',url:\"http://localhost:8080/school/card/?card_content=\".concat(postValue),headers:{'Authorization':'Bearer '+localStorage.getItem('cmsToken')}};_context.next=3;return axios(options);case 3:posts=_context.sent;_this.setState({posts:posts.data});case 5:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.handleUpdate=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(posts,id){var i,editValue,options;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:i=0;case 1:if(!(i<posts.length)){_context2.next=10;break;}if(!(posts[i]['id']==id)){_context2.next=7;break;}editValue=posts[i]['card_content'];options={method:'PUT',url:\"http://localhost:8080/school/card/\".concat(id,\"?card_content=\").concat(editValue),headers:{'Authorization':'Bearer '+localStorage.getItem('cmsToken')}};_context2.next=7;return axios(options);case 7:i++;_context2.next=1;break;case 10:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2,_x3){return _ref2.apply(this,arguments);};}();_this.handleDelete=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id){var options,posts;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:options={method:'DELETE',url:\"http://localhost:8080/school/card/?card_id=\".concat(id),headers:{'Authorization':'Bearer '+localStorage.getItem('cmsToken')}};_context3.next=3;return axios(options);case 3:posts=_context3.sent;_this.setState({posts:posts.data});case 5:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x4){return _ref3.apply(this,arguments);};}();_this.handleFileChange=function(e){console.log('you must be there');var array=[];console.log(e.target.files.length);if(e.target.files[0]){var i;for(i=0;i<e.target.files.length;i++){var image=e.target.files[i];array.push(image);}_this.setState({image:_this.state.image.concat(array)});console.log(_this.state.image);}};_this.handleUpload=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(images,postValue){var image,options,posts,_loop,i;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:image=_this.state.image;options={method:'POST',url:\"http://localhost:8080/school/card/?card_content=\".concat(postValue),headers:{'Authorization':'Bearer '+localStorage.getItem('cmsToken')}};_context5.next=4;return axios(options);case 4:posts=_context5.sent;_this.setState({posts:posts.data});_loop=function _loop(i){console.log(image[i].name);var uploadTask=storage.ref(\"social_card/\".concat(image[i].name)).put(image[i]);uploadTask.on('state_changed',function(snapshot){},function(error){console.log(error);},function(){storage.ref('social_card').child(image[i].name).getDownloadURL().then(/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(url){var id,photoOptions,photos;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:console.log(url);id=posts.data[0]['id'];console.log(id);photoOptions={method:'POST',url:\"http://localhost:8080/school/card/\".concat(id),data:{url:url},headers:{'Authorization':'Bearer '+localStorage.getItem('cmsToken')}};_context4.next=6;return axios(photoOptions);case 6:photos=_context4.sent;_this.setState({photos:photos.data});case 8:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x7){return _ref5.apply(this,arguments);};}());});};for(i=0;i<_this.state.image.length;i++){_loop(i);}case 8:case\"end\":return _context5.stop();}}},_callee5);}));return function(_x5,_x6){return _ref4.apply(this,arguments);};}();_this.state={posts:[],photos:[],editValue:'',postValue:'',inputValue:'',image:[],url:[],modal:false};_this.toggle=_this.toggle.bind(_assertThisInitialized(_this));_this.handlePost=_this.handlePost.bind(_assertThisInitialized(_this));_this.handlePostChange=_this.handlePostChange.bind(_assertThisInitialized(_this));_this.handleUpdate=_this.handleUpdate.bind(_assertThisInitialized(_this));_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));_this.handleDelete=_this.handleDelete.bind(_assertThisInitialized(_this));_this.handleFileChange=_this.handleFileChange.bind(_assertThisInitialized(_this));_this.handleUpload=_this.handleUpload.bind(_assertThisInitialized(_this));return _this;}_createClass(SocialCardPost,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var options,_yield$axios,posts,photoOptions,photo,photos;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:options={method:'GET',url:'http://localhost:8080/school/card',headers:{'Authorization':'Bearer '+localStorage.getItem('cmsToken')}};_context6.next=3;return axios(options);case 3:_yield$axios=_context6.sent;posts=_yield$axios.data;// console.log(posts)\nthis.setState({posts:posts});photoOptions={method:'GET',url:'http://localhost:8080/school/card/photo',headers:{'Authorization':'Bearer '+localStorage.getItem('cmsToken')}};_context6.next=9;return axios(photoOptions);case 9:photo=_context6.sent;// console.log(photo)\nphotos=photo.data;this.setState({photos:photos});console.log(this.state.photos);case 13:case\"end\":return _context6.stop();}}},_callee6,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"toggle\",value:function(){var _toggle=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(){return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return this.setState(function(prevState){return{modal:!prevState.modal};});case 2:case\"end\":return _context7.stop();}}},_callee7,this);}));function toggle(){return _toggle.apply(this,arguments);}return toggle;}()},{key:\"handlePostChange\",value:function handlePostChange(event){this.setState({postValue:event.target.value});console.log(this.state.postValue);}},{key:\"handleChange\",value:function handleChange(event,id,allPost){var i;for(i=0;i<allPost.length;i++){if(allPost[i]['id']==id){allPost[i]['card_content']=event.target.value;this.setState({posts:allPost});}}}},{key:\"render\",value:function render(){var _this2=this;// const posts = [\n//     { id: 1, card_content: 'hello' },\n//     { id: 2, card_content: 'bye' }\n// ];\nvar posts=this.state.posts;var photos=this.state.photos;console.log(posts);console.log(photos);// const posts = this.state.posts\n// console.log(`here is ${posts}`)\nvar feedCard=posts.map(function(post,index){return/*#__PURE__*/React.createElement(\"div\",{key:index},/*#__PURE__*/React.createElement(Card,{id:post.id},/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"input\",{type:\"text\",id:\"socialInput\",value:post.card_content,onChange:function onChange(event){return _this2.handleChange(event,post.id,_this2.state.posts);}}),photos.map(function(photo){return/*#__PURE__*/React.createElement(\"div\",{id:\"imageDiv\"},post.id==photo.card_id?/*#__PURE__*/React.createElement(\"img\",{id:\"postImage\",src:photo.photo,hspace:\"20\"}):'');}// <img src={photo.photo} />\n))),/*#__PURE__*/React.createElement(CardFooter,null,/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:\"1.5\"},/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){return _this2.handleUpdate(_this2.state.posts,post.id);},id:post.id},\"Edit\")),/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){return _this2.handleDelete(post.id);},id:post.id},\"Delete\")))))),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null));});return/*#__PURE__*/React.createElement(\"div\",{id:\"socialCardBody\"},/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:\"3\"}),/*#__PURE__*/React.createElement(Col,{md:\"6\"},/*#__PURE__*/React.createElement(Card,{className:\"gedf-card\"},/*#__PURE__*/React.createElement(\"div\",{className:\"social_card_card-body py-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex\"},/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Form,{action:\"\"},/*#__PURE__*/React.createElement(FormGroup,{className:\"mb-0\"},/*#__PURE__*/React.createElement(Label,{className:\"sr-only\",for:\"exampleFormControlTextarea1\"},\"Example textarea\"),/*#__PURE__*/React.createElement(Input,{type:\"textarea\",className:\"social_card_form-control border-0 textValue\",id:\"exampleFormControlTextarea1\",rows:\"2\",placeholder:\"Update Your Feed Here\",onChange:this.handlePostChange})))))),/*#__PURE__*/React.createElement(CardFooter,{className:\"p-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-between align-items-center\"},/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Button,{type:\"button\",className:\"socail_card_btn btn-fposts btn-block btn-sm\",\"data-toggle\":\"modal\",\"data-target\":\"#uploadImg\",onClick:this.toggle},\"image/video\"),/*#__PURE__*/React.createElement(Modal,{isOpen:this.state.modal,toggle:this.toggle,className:this.props.className},/*#__PURE__*/React.createElement(ModalHeader,{toggle:this.toggle},\"Upload\"),/*#__PURE__*/React.createElement(ModalBody,null,/*#__PURE__*/React.createElement(Input,{type:\"file\",multiple:true,onChange:function onChange(e){return _this2.handleFileChange(e);}}),/*#__PURE__*/React.createElement(Input,{type:\"text\",placeholder:\"Cations\",onChange:this.handlePostChange})),/*#__PURE__*/React.createElement(ModalFooter,null,/*#__PURE__*/React.createElement(Button,{color:\"primary\",onClick:function onClick(){_this2.handleUpload(_this2.state.image,_this2.state.postValue);}},\"Upload\"),/*#__PURE__*/React.createElement(Button,{color:\"secondary\",onClick:this.toggle},\"Cancel\")))),/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){return _this2.handlePost(_this2.state.postValue);},type:\"button\",className:\"socail_card_btn btn-fposts btn-block btn-sm\",id:\"post\"},\"Post\"))))),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),feedCard),/*#__PURE__*/React.createElement(Col,{md:\"3\"}))));}}]);return SocialCardPost;}(React.Component);// const mapDispatchToProps = (dispatch) => {\n//     return {\n//       deleteCard: function (id) {\n//         console.log(id)\n//         dispatch(deleteThunk(id))\n//       }\n//     }\n//   }\n//   export default connect(mapDispatchToProps)(SocialCardPost)","map":{"version":3,"sources":["/Users/leesebastian/Desktop/whitetails/Farnhok/skoolsCapstone/frontend/skools/src/component/schoolCms/SocailCardPost.js"],"names":["React","axios","Container","Row","Card","CardHeader","CardBody","CardTitle","CardText","Col","Form","FormGroup","CardFooter","Button","Label","Input","ButtonDropdown","DropdownToggle","DropdownMenu","DropdownItem","Modal","ModalHeader","ModalBody","ModalFooter","connect","async","storage","SocialCardPost","props","handlePost","postValue","options","method","url","headers","localStorage","getItem","posts","setState","data","handleUpdate","id","i","length","editValue","handleDelete","handleFileChange","e","console","log","array","target","files","image","push","state","concat","handleUpload","images","name","uploadTask","ref","put","on","snapshot","error","child","getDownloadURL","then","photoOptions","photos","inputValue","modal","toggle","bind","handlePostChange","handleChange","photo","prevState","event","value","allPost","feedCard","map","post","index","card_content","card_id","className","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport {\n    Container, Row, Card, CardHeader, CardBody, CardTitle, CardText, Col, Form, FormGroup, CardFooter, Button, Label, Input,\n    ButtonDropdown, DropdownToggle, DropdownMenu, DropdownItem, Modal, ModalHeader, ModalBody, ModalFooter\n} from 'reactstrap'\nimport '../../assets/css/cms/socialCard.css'\nimport { connect } from \"react-redux\"\nimport { async } from '@firebase/util';\nimport { storage } from '../../firebase';\n// import {deleteThunk} from \"../../redux/cmsSocial/\"\n\n\n\nexport class SocialCardPost extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            posts: [], photos: [], editValue: '', postValue: '', inputValue: '', image: [], url: [], modal: false\n        };\n        this.toggle = this.toggle.bind(this);\n        this.handlePost = this.handlePost.bind(this);\n        this.handlePostChange = this.handlePostChange.bind(this);\n        this.handleUpdate = this.handleUpdate.bind(this);\n        this.handleChange = this.handleChange.bind(this);\n        this.handleDelete = this.handleDelete.bind(this);\n        this.handleFileChange = this.handleFileChange.bind(this);\n        this.handleUpload = this.handleUpload.bind(this);\n    }\n\n    async componentDidMount() {\n        let options = {\n            method: 'GET',\n            url: 'http://localhost:8080/school/card',\n            headers: {\n                'Authorization': 'Bearer ' + localStorage.getItem('cmsToken')\n            }\n        }\n        const { data: posts } = await axios(options)\n        // console.log(posts)\n        this.setState({ posts })\n\n        let photoOptions = {\n            method: 'GET',\n            url: 'http://localhost:8080/school/card/photo',\n            headers: {\n                'Authorization': 'Bearer ' + localStorage.getItem('cmsToken')\n            }\n        }\n\n        const photo = await axios(photoOptions)\n        // console.log(photo)\n        let photos = photo.data\n        this.setState({ photos })\n\n        console.log(this.state.photos)\n\n    }\n\n    async toggle() {\n       await this.setState(prevState => ({\n            modal: !prevState.modal\n        }));\n    }\n\n    handlePostChange(event) {\n        this.setState({ postValue: event.target.value })\n        console.log(this.state.postValue)\n    }\n\n    handleChange(event, id, allPost) {\n        let i\n        for (i = 0; i < allPost.length; i++) {\n            if (allPost[i]['id'] == id) {\n                allPost[i]['card_content'] = event.target.value\n                this.setState({ posts: allPost });\n            }\n        }\n    }\n\n    handlePost = async (postValue) => {\n        // console.log(postValue)\n\n        let options = {\n            method: 'POST',\n            url: `http://localhost:8080/school/card/?card_content=${postValue}`,\n            headers: {\n                'Authorization': 'Bearer ' + localStorage.getItem('cmsToken')\n            }\n        }\n\n        let posts = await axios(options)\n        this.setState({ posts: posts.data })\n    }\n\n    handleUpdate = async (posts, id) => {\n        let i\n        for (i = 0; i < posts.length; i++) {\n            if (posts[i]['id'] == id) {\n                let editValue = posts[i]['card_content']\n\n                let options = {\n                    method: 'PUT',\n                    url: `http://localhost:8080/school/card/${id}?card_content=${editValue}`,\n                    headers: {\n                        'Authorization': 'Bearer ' + localStorage.getItem('cmsToken')\n                    }\n                }\n\n                await axios(options)\n            }\n        }\n\n    }\n\n    handleDelete = async id => {\n        let options = {\n            method: 'DELETE',\n            url: `http://localhost:8080/school/card/?card_id=${id}`,\n            headers: {\n                'Authorization': 'Bearer ' + localStorage.getItem('cmsToken')\n            }\n        }\n        let posts = await axios(options)\n        this.setState({ posts: posts.data })\n    }\n\n    handleFileChange = e => {\n        console.log('you must be there')\n        var array = []\n        console.log(e.target.files.length)\n        if (e.target.files[0]) {\n            var i\n            for (i = 0; i < e.target.files.length; i++) {\n                var image = e.target.files[i]\n                array.push(image)\n            }\n            this.setState({ image: this.state.image.concat(array) });\n            console.log(this.state.image)\n        }\n    }\n\n    handleUpload = async (images,postValue) => {\n        const { image } = this.state;\n\n        let options = {\n            method: 'POST',\n            url: `http://localhost:8080/school/card/?card_content=${postValue}`,\n            headers: {\n                'Authorization': 'Bearer ' + localStorage.getItem('cmsToken')\n            }\n        }\n        let posts = await axios(options)\n        this.setState({ posts: posts.data })\n\n        for (let i = 0; i < this.state.image.length; i++) {\n            console.log(image[i].name)\n\n            const uploadTask = storage.ref(`social_card/${image[i].name}`).put(image[i]);\n\n            uploadTask.on('state_changed', (snapshot) => {\n\n            }, (error) => { console.log(error); },\n                () => {\n                    storage.ref('social_card').child(image[i].name).getDownloadURL().then(async (url) => {\n                        console.log(url);\n\n                        let id = posts.data[0]['id']\n                        console.log(id)\n                        let photoOptions = {\n                            method: 'POST',\n                            url: `http://localhost:8080/school/card/${id}`,\n                            data: {url: url},\n                            headers: {\n                                'Authorization': 'Bearer ' + localStorage.getItem('cmsToken')\n                            }\n                        }\n                        let photos = await axios(photoOptions\n\n                        )\n\n                        this.setState({photos: photos.data})\n\n                    })\n                }\n            )\n        }\n    }\n\n\n\n    render() {\n        // const posts = [\n        //     { id: 1, card_content: 'hello' },\n        //     { id: 2, card_content: 'bye' }\n        // ];\n        const posts = this.state.posts\n        const photos = this.state.photos\n        console.log(posts)\n        console.log(photos)\n\n        // const posts = this.state.posts\n        // console.log(`here is ${posts}`)\n        const feedCard =\n\n            posts.map((post, index) =>\n\n                <div key={index}>\n                    {/* {this.setState({inputValue: post.card_content})} */}\n                    <Card id={post.id}>\n                        <CardBody>\n                            {/* <CardText>{post.card_content}</CardText> */}\n                            <div>\n                                {/* <label> */}\n                                <input type=\"text\" id=\"socialInput\" value={post.card_content} onChange={(event) => this.handleChange(event, post.id, this.state.posts)} />\n                                {photos.map((photo) =>\n                                    <div id='imageDiv'>\n                                        {post.id == photo.card_id ? <img id='postImage' src={photo.photo} hspace=\"20\" /> : ''}\n                                    </div>\n                                    // <img src={photo.photo} />\n                                )}\n                                {/* </label> */}\n                            </div>\n                        </CardBody>\n                        <CardFooter>\n                            <Container>\n                                <Row>\n                                    <Col md=\"1.5\"><Button onClick={() => this.handleUpdate(this.state.posts, post.id)} id={post.id}>Edit</Button></Col>\n                                    <Col><Button onClick={() => this.handleDelete(post.id)} id={post.id}>Delete</Button></Col>\n                                </Row>\n                            </Container>\n                        </CardFooter>\n                    </Card>\n                    <br />\n                    <br />\n                </div>\n\n            )\n\n\n\n        return (\n            <div id=\"socialCardBody\">\n                <Container>\n                    <Row>\n                        <Col md=\"3\">\n\n                        </Col>\n                        <Col md=\"6\">\n                            <Card className=\"gedf-card\">\n                                <div className=\"social_card_card-body py-2\">\n                                    <div className=\"d-flex\">\n                                        <Col>\n                                            <Form action=\"\">\n                                                <FormGroup className=\"mb-0\">\n                                                    <Label className=\"sr-only\" for=\"exampleFormControlTextarea1\">Example textarea</Label>\n                                                    <Input type=\"textarea\" className=\"social_card_form-control border-0 textValue\" id=\"exampleFormControlTextarea1\"\n                                                        rows=\"2\" placeholder=\"Update Your Feed Here\" onChange={this.handlePostChange} />\n                                                </FormGroup>\n                                            </Form>\n                                        </Col>\n                                    </div>\n                                </div>\n                                <CardFooter className=\"p-2\">\n                                    <div className=\"d-flex justify-content-between align-items-center\">\n\n                                        <Col>\n                                            <Button type=\"button\" className=\"socail_card_btn btn-fposts btn-block btn-sm\" data-toggle=\"modal\"\n                                                data-target=\"#uploadImg\" onClick={this.toggle}>\n                                                image/video\n                                            </Button>\n                                            <Modal isOpen={this.state.modal} toggle={this.toggle} className={this.props.className}>\n                                                <ModalHeader toggle={this.toggle}>Upload</ModalHeader>\n                                                <ModalBody>\n                                                    <Input type=\"file\" multiple onChange={e => this.handleFileChange(e)} />\n                                                    <Input type=\"text\" placeholder=\"Cations\" onChange={this.handlePostChange}/>\n                                                </ModalBody>\n                                                <ModalFooter>\n                                                    <Button color=\"primary\" onClick={()=>{this.handleUpload(this.state.image,this.state.postValue)}} >Upload</Button>\n                                                    <Button color=\"secondary\" onClick={this.toggle}>Cancel</Button>\n                                                </ModalFooter>\n                                            </Modal>\n                                        </Col>\n                                        <Col>\n                                            <Button onClick={() => this.handlePost(this.state.postValue)} type=\"button\" className=\"socail_card_btn btn-fposts btn-block btn-sm\" id=\"post\">Post</Button>\n                                        </Col>\n                                    </div>\n                                </CardFooter>\n                            </Card>\n                            <br />\n                            <br />\n                            {feedCard}\n                        </Col>\n                        <Col md=\"3\">\n                        </Col>\n                    </Row>\n                </Container>\n            </div>\n        )\n    }\n\n}\n\n// const mapDispatchToProps = (dispatch) => {\n//     return {\n\n//       deleteCard: function (id) {\n//         console.log(id)\n//         dispatch(deleteThunk(id))\n//       }\n//     }\n//   }\n\n//   export default connect(mapDispatchToProps)(SocialCardPost)"]},"metadata":{},"sourceType":"module"}