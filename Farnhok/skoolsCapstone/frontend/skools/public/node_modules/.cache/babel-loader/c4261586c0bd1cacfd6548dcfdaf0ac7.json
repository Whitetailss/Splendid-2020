{"ast":null,"code":"import axios from'axios';export var CHECK_LOGIN='CHECK_LOGIN';export var LOGIN_SUCCESS='LOGIN_SUCCESS';export var LOGIN_FAILURE='LOGIN_FAILURE';export var LOGOUT='LOGOUT';export var SIGNUP_FAILURE='SIGNUP_FAILURE';export function checkLogin(){if(localStorage.getItem('token')){return{type:CHECK_LOGIN};}else{return{type:LOGIN_FAILURE};}}function loginSuccess(){return{type:LOGIN_SUCCESS};}function loginFailure(){return{type:LOGIN_FAILURE};}function logOutAction(){return{type:LOGOUT};}export function loginUser(email,password){return function(dispatch){return axios.post(\"\".concat(process.env.REACT_APP_API_SERVER,\"/api/login\"),{email:email,password:password}).then(function(response){console.log(response);if(response.data==null){dispatch(loginFailure());}else if(!response.data.token){dispatch(loginFailure());}else{localStorage.setItem('token',response.data.token);dispatch(loginSuccess());}});};}export function loginFacebook(userInfo){return function(dispatch){return axios.post(\"\".concat(process.env.REACT_APP_API_SERVER,\"/api/login/facebook\"),{userInfo:userInfo,access_token:userInfo.accessToken}).then(function(response){if(response.data==null){dispatch(loginFailure('UnKnown Error'));}else if(!response.data.token){dispatch(loginFailure(response.data.message||\"Token not generated!\"));}else{localStorage.setItem('token',response.data.token);localStorage.setItem('userPicture',userInfo.picture.data.url);dispatch(loginSuccess());}});};}export function logOut(){return function(dispatch){localStorage.removeItem('token');localStorage.removeItem('userPicture');dispatch(logOutAction());};}function signUpFailure(){return{type:SIGNUP_FAILURE};}export function signUpUser(email,password){return function(dispatch){return axios.post(\"http://localhost:8080/api/signup\",{email:email,password:password}).then(function(response){console.log('signup'+response);if(!response.data){dispatch(signUpFailure());}else{localStorage.setItem('token',response.data.token);dispatch(loginSuccess());}}).catch(function(err){dispatch(signUpFailure());});};}","map":{"version":3,"sources":["/Users/leesebastian/Desktop/whitetails/Farnhok/skoolsCapstone/frontend/skools/src/redux/auth/actions.js"],"names":["axios","CHECK_LOGIN","LOGIN_SUCCESS","LOGIN_FAILURE","LOGOUT","SIGNUP_FAILURE","checkLogin","localStorage","getItem","type","loginSuccess","loginFailure","logOutAction","loginUser","email","password","dispatch","post","process","env","REACT_APP_API_SERVER","then","response","console","log","data","token","setItem","loginFacebook","userInfo","access_token","accessToken","message","picture","url","logOut","removeItem","signUpFailure","signUpUser","catch","err"],"mappings":"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","sourcesContent":["import axios from 'axios';\nexport const CHECK_LOGIN = 'CHECK_LOGIN';\nexport const LOGIN_SUCCESS = 'LOGIN_SUCCESS';\nexport const LOGIN_FAILURE = 'LOGIN_FAILURE';\nexport const LOGOUT = 'LOGOUT';\nexport const SIGNUP_FAILURE = 'SIGNUP_FAILURE';\n\nexport function checkLogin() {\n    if (localStorage.getItem('token')) {\n        return {\n            type: CHECK_LOGIN\n        };\n    } else {\n       return {\n           type: LOGIN_FAILURE\n        }\n    }\n}\n\nfunction loginSuccess() {\n    return {\n        type: LOGIN_SUCCESS\n    };\n}\n\nfunction loginFailure() {\n    return {\n        type: LOGIN_FAILURE,\n    }\n}\n\n function logOutAction() {\n    return {\n        type: LOGOUT\n    }\n}\n\nexport function loginUser(email, password) {\n    return (dispatch) => {\n        return axios.post(`${process.env.REACT_APP_API_SERVER}/api/login`,\n            {\n                email: email,\n                password: password\n            }\n        )\n        .then(response => {\n            console.log(response)\n            if(response.data == null){\n                dispatch(loginFailure());\n            } else if (!response.data.token){\n                dispatch(loginFailure());\n            } else {\n                localStorage.setItem('token', response.data.token);\n                dispatch(loginSuccess());\n            }\n        });\n    };\n}\n\nexport function loginFacebook(userInfo){\n    return(dispatch) => {\n        return axios.post(`${process.env.REACT_APP_API_SERVER}/api/login/facebook`,\n        {   \n            userInfo: userInfo,\n            access_token: userInfo.accessToken\n        })\n        .then(response => {\n            if(response.data == null){\n                dispatch(loginFailure('UnKnown Error'));\n            } else if (!response.data.token){\n                dispatch(loginFailure(response.data.message || \"Token not generated!\"));\n            } else {\n                localStorage.setItem('token', response.data.token);\n                localStorage.setItem('userPicture', userInfo.picture.data.url)\n                dispatch(loginSuccess())\n            }\n        });\n    };\n}\n\n\n\nexport function logOut(){\n    return (dispatch)=> {\n        localStorage.removeItem('token');\n        localStorage.removeItem('userPicture');\n        dispatch(logOutAction());\n    };\n}\n\n\nfunction signUpFailure() {\n    return {\n        type: SIGNUP_FAILURE,\n    }\n}\n\nexport function signUpUser(email, password) {\n    return (dispatch) => {\n        return axios.post(`http://localhost:8080/api/signup`,\n            {\n                email: email,\n                password: password\n            }\n        )\n        .then(response => {\n            console.log('signup' + response);\n            if(!response.data){\n                dispatch(signUpFailure());\n            } else {\n                localStorage.setItem('token', response.data.token);\n                dispatch(loginSuccess());\n            }\n        })\n        .catch(err => {\n            dispatch(signUpFailure());\n        })\n    };\n}"]},"metadata":{},"sourceType":"module"}